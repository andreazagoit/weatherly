(()=>{"use strict";const t="351abccc480b5b85fee07f3a470a0117",e=t=>{switch(t){case!0:return document.querySelector("#header__inputStatus").className="true";case!1:return document.querySelector("#header__inputStatus").className="false";default:return document.querySelector("#header__inputStatus").className=""}},a=t=>{switch(t){case"Sunny":case"Clear":return"sunny";case"Rain":return"rain";case"Clouds":case"Mist":case"Haze":case"Clouds":return"clouds";default:return"default"}},i=t=>{switch(t){case"Sunny":case"Clear":return"fa-sun";case"Rain":return"fa-cloud-showers-heavy";case"Clouds":case"Mist":case"Haze":return"fa-cloud";default:return"default"}},n=()=>{cityList=JSON.parse(localStorage.getItem("cityList")),console.log("City list",cityList),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const n=e.coords.latitude,c=e.coords.longitude;try{fetch(`http://api.openweathermap.org/data/2.5/weather?lat=${n}&lon=${c}&appid=${window.API_KEY}&units=metric`).then((e=>{200==e.status&&e.json().then((e=>{t.innerHTML=`<div class="weather-card ${a(e.weather[0].main)}"><div class="weather-card__content"><div class="weather-card__contentMeteo"><i class="fas ${i(e.weather[0].main)} "></i><p> ${e.weather[0].main} </p></div><div class="weather-card__contentCity"><h1> ${Math.round(e.main.temp)} °</h1><h2>${e.name}</h2></div></div></div>`+t.innerHTML}))}))}catch(t){alert(t)}})):console.log("La geo-localizzazione NON è possibile");try{cityList.length>0&&(document.querySelector(".alert").style.display="none")}catch(t){}const t=document.querySelector(".weather-card-list");t.innerHTML="",cityList&&cityList.forEach((e=>{try{fetch(`http://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${window.API_KEY}&units=metric`).then((e=>{200==e.status&&e.json().then((e=>{t.innerHTML+=`<div class="weather-card ${a(e.weather[0].main)}"><div class="weather-card__content"><div class="weather-card__contentMeteo"><i class="fas ${i(e.weather[0].main)} "></i><p> ${e.weather[0].main} </p></div><div class="weather-card__contentCity"><h1> ${Math.round(e.main.temp)} °</h1><h2>${e.name}</h2></div></div ><div class="weather-card__delete" onClick="window.removeCity('${e.name}')"><i class="fas fa-times"></i></div></div >`}))}))}catch(t){alert(t)}}))};window.API_KEY=t,window.addCity=t=>{console.log("ADD",window.cityName),window.cityExist?(window.cityList?window.cityList.includes(window.cityName)?alert("Città già presente"):(window.cityList.push(window.cityName),document.querySelector("input").value="",e()):window.cityList=[window.cityName],localStorage.setItem("cityList",JSON.stringify(window.cityList))):alert("La Città non esiste"),window.getData()},window.removeCity=t=>{console.log("REMOVE",window.cityName);const e=JSON.parse(localStorage.getItem("cityList")).filter((e=>{if(e!==t)return e}));localStorage.setItem("cityList",JSON.stringify(e)),window.getData()},window.getData=n,window.setStatus=e,window.cityName="",window.cityExist=!1,window.cityList=[];const c=document.querySelector("input");c.addEventListener("input",(a=>{if(""!==c.value)try{fetch(`http://api.openweathermap.org/data/2.5/weather?q=${c.value}&appid=${t}&units=metric`).then((t=>{200==t.status?(t.json().then((t=>{window.cityName=t.name})),window.cityExist=!0,console.log("Exist"),e(!0)):(cityName=null,cityExist=!1,console.log("Not Exist"),e(!1))}))}catch(t){alert(t)}})),document.querySelector(".cover").addEventListener("animationend",(function(){document.body.className="scroll",document.querySelector(".cover").style.display="none"})),n()})();